var e=[];var r={url:"http://127.0.0.1:3000/api",projectName:"webMonitorSdk",appId:"20000902",userId:"90081",isImageUpload:!1,batchSize:20};var t=XMLHttpRequest.prototype.open,n=XMLHttpRequest.prototype.send;function o(e){var t=JSON.stringify({id:"id-"+Date.now()+"-"+Math.random().toString(36).substring(2,9),data:e}),n=function(e,r){window.requestIdleCallback?window.requestIdleCallback((function(){return u(e,r)}),{timeout:3e3}):setTimeout((function(){return u(e,r)}))}(r.url,t);n||a(r.url,t)}function i(t){!function(r){e.push(r)}(t);var n=e;n.length&&n.length>r.batchSize&&(o(n),e.length=0)}function a(e,r){window.requestIdleCallback?window.requestIdleCallback((function(){var o=new XMLHttpRequest;t.call(o,"post",e,!0),n.call(o,JSON.stringify(r))}),{timeout:3e3}):setTimeout((function(){var o=new XMLHttpRequest;t.call(o,"post",e,!0),n.call(o,JSON.stringify(r))}))}var u="sendBeacon"in navigator?navigator.sendBeacon:a;"function"==typeof SuppressedError&&SuppressedError;var l=XMLHttpRequest.prototype,s=l.open,c=l.send,p=Object.freeze({__proto__:null,originalProto:l,originalOpen:s,originalSend:c});var d=Object.freeze({__proto__:null,default:function(){window.addEventListener("error",(function(e){var r=e.target;r&&((r.src||r.href)&&i({type:"error",subType:"resource",url:r.src||r.href,html:r.outerHTML,pageUrl:window.location.href,paths:e.path}))}),!0),window.onerror=function(e,r,t,n,o){i({type:"error",subType:"js",msg:e,url:r,lineNo:t,columnNo:n,stack:o.stack||"",pageUrl:window.location.href,startTime:performance.now()})},window.addEventListener("unhandledrejection",(function(e){i({type:"error",subType:"promise",msg:e.reason,pageUrl:window.location.href,startTime:e.timeStamp})}))}}),f=Object.freeze({__proto__:null});function w(e,r){if(!window.__webMonitorSdk__.vue){window.__webMonitorSdk__.vue=!0;var t=e.config.errorHandler;e.config.errorHandler=function(e,r,n){t&&t.call(this,e,r,n)}}}window.__webMonitorSdk__={version:"0.0.1",vue:!1,react:!1};var _={install:w,performance:p,error:d,init:function(e){!function(e){for(var t in r)e[t]}(e)},behavior:f};export{_ as default,w as install};
//# sourceMappingURL=index.js.map
